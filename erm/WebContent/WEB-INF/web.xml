<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>erm</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
 <!--  filter -->
 <filter>
 	<filter-name>AuthenticationFilter</filter-name>
 	<filter-class>com.fox.it.erm.filter.ErmFilter</filter-class>
 </filter>
 <filter-mapping>
 	<filter-name>AuthenticationFilter</filter-name>
	<url-pattern>/</url-pattern> 	
 	<url-pattern>/index.jsp</url-pattern> 	
 	<url-pattern>/rest/*</url-pattern> 	
 	<url-pattern>/p/*</url-pattern> 	 	
 </filter-mapping>
 <!-- end filter --> 
 
 <!-- Spring bootstrap -->
 <listener>
 	<listener-class>
 		org.springframework.web.context.request.RequestContextListener
 	</listener-class>
 </listener>
 <!-- Spring bootstrap -->
  
 <!-- security configuration -->
	<security-constraint>
		<display-name>ProtectedResources</display-name>
		<web-resource-collection>
			<web-resource-name>Protected</web-resource-name>
			<url-pattern>/index.html</url-pattern>
			<url-pattern>/index.jsp</url-pattern>
			<url-pattern>/p/*</url-pattern>
			<url-pattern>/rest/*</url-pattern>
			<http-method>GET</http-method>
			<http-method>POST</http-method>
			<http-method>DELETE</http-method>			
		</web-resource-collection>
		<auth-constraint>
			<role-name>AUTHENTICATED</role-name>
		</auth-constraint>
	</security-constraint>
	<login-config>
		<auth-method>FORM</auth-method>
		<form-login-config>
			<form-login-page>/login.jsp</form-login-page>
			<form-error-page>/loginerror.jsp</form-error-page>
		</form-login-config>
	</login-config>	
	<security-role>
		<role-name>AUTHENTICATED</role-name>
	</security-role>
	<security-role>
		<role-name>ERM</role-name>
	</security-role>	
  
  <!--  end security configuration -->
  <ejb-local-ref>
  	<ejb-ref-name>ejb/ProductService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.ProductService</local>  	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/ErmProductVersionService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.ErmProductVersionService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/ErmProductRestrictionService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.ErmProductRestrictionService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/CommentsService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.comments.CommentsService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/CodesService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.CodesService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/TerritoryGroupService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.TerritoryGroupService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/RestrictionService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.RestrictionService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/MediaService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.MediaService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/TerritoryService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.TerritoryService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/LanguageService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.LanguageService</local> 	
  </ejb-local-ref>                              
  <ejb-local-ref>
  	<ejb-ref-name>ejb/LanguageGroupService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.LanguageGroupService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/DateService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.DateService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/RestrictionGroupService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.RestrictionGroupService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/RightStrandService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.RightStrandService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/RightStrandSaveService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.RightStrandSaveService</local> 	
  </ejb-local-ref>  
  <ejb-local-ref>
  	<ejb-ref-name>ejb/ProductVersionSaveService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.ProductVersionSaveService</local> 	
  </ejb-local-ref>  
  <ejb-local-ref>
  	<ejb-ref-name>ejb/ClearanceMemoService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.ClearanceMemoService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/XProductCopyService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.XProductCopyService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/XProductDeleteService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.xproduct.delete.XProductDeleteService</local> 	
  </ejb-local-ref>  
  <ejb-local-ref>
  	<ejb-ref-name>ejb/ContractualPartyService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.ContractualPartyService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/GrantsService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.grants.GrantsService</local> 	
  </ejb-local-ref>
    <ejb-local-ref>
  	<ejb-ref-name>ejb/ReportsService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.reports.ReportsService</local> 	
  </ejb-local-ref>  
  <ejb-local-ref>
  	<ejb-ref-name>ejb/QueryService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.query.QueryService</local> 	
  </ejb-local-ref>
  <ejb-local-ref>
  	<ejb-ref-name>ejb/JobService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.JobService</local> 	
  </ejb-local-ref>  
  <ejb-local-ref>
  	<ejb-ref-name>ejb/AttachmentsService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.AttachmentsService</local> 	
  </ejb-local-ref>  
   <ejb-local-ref>
  	<ejb-ref-name>ejb/CopyrightService</ejb-ref-name>
	<ejb-ref-type>Session</ejb-ref-type>
	<local>com.fox.it.erm.service.copyright.CopyrightService</local> 	
  </ejb-local-ref> 
</web-app>

